<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="projects"></ion-back-button>
    </ion-buttons>
    <ion-title>Editar Proyecto</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen] = "true">

  <ion-fab vertical="top" horizontal="end" slot="fixed">
    <ion-fab-button color="secondary">
      <ion-icon name="add"></ion-icon>
    </ion-fab-button>

    <ion-fab-list>
      <ion-fab-button color="danger" data-desc="Eliminar" (click)="deleteProject();">
        <ion-icon name="trash"></ion-icon>
      </ion-fab-button>
    </ion-fab-list>

  </ion-fab>

    <ion-card>
      <ion-card-header> Datos generales</ion-card-header>
      <ion-card-content>

        <ion-item>              
          <!-- <ion-select placeholder="Tanque" [(ngModel)] ="tank" (ionChange)="setTankValue(tank)">
              <ion-select-option  *ngFor="let tank of tankList.products">{{tank.productDescription}}</ion-select-option>
            </ion-select> -->
            <ion-select [(ngModel)]="currentProject.type" placeholder="Tipo">
              <ion-select-option value="Empresarial"> Empresarial </ion-select-option>
              <ion-select-option value="Local"> Local </ion-select-option>
              <ion-select-option value="Particular"> Particular </ion-select-option>
            </ion-select>
          </ion-item>

          <ion-item>              
            <!-- <ion-select placeholder="Tanque" [(ngModel)] ="tank" (ionChange)="setTankValue(tank)">
                <ion-select-option  *ngFor="let tank of tankList.products">{{tank.productDescription}}</ion-select-option>
              </ion-select> -->
              <ion-select placeholder="Lider" [(ngModel)]="employee" (ionChange)="setLeader(employee)">
                <ion-select-option *ngFor="let employee of employees" >{{employee.id}} - {{employee.firstName}} {{employee.lastName}} </ion-select-option>
              </ion-select>
            </ion-item>

            <ion-item>
              <ion-input readonly>
                {{projectLeader.firstName}} {{projectLeader.lastName}}
              </ion-input>
            </ion-item>
    
       


        <ion-list lines="full" class="ion-no-margin ion-no-padding">
          <ion-item>
            <ion-input [(ngModel)]="currentProject.name" placeholder="Nombre" type="text"></ion-input>
          </ion-item>
        
          <ion-item style="width: 150px; text-align: center;">
            <ion-input [(ngModel)]="currentProject.budget" placeholder="Presupuesto"  type="number" min = "0">$</ion-input>
          </ion-item>

          <ion-item>
            <ion-label>Empleados Colaboradores</ion-label>
            <ion-select [(ngModel)]="assignedUsers" multiple="true" cancelText="Cancelar" okText="Agregar" (ionChange)="printArray()">
              <ion-select-option [value]="{employeeId: employee.id}"
              *ngFor="let employee of employees">{{employee.id}} - {{employee.firstName}} {{employee.lastName}}
            </ion-select-option>
            </ion-select>
          </ion-item>

          
          <ion-grid style="margin-top: 25px;" >
            <!-- headers/Titles -->
             <ion-row class="tr">
               <ion-col  size="3">
                 Nombre
               </ion-col>
               <ion-col  size="3">
                 Apellido
               </ion-col>
               <ion-col  size="3">
                 Eliminar
               </ion-col>
              
             </ion-row>

             <!-- Content -->
             <ion-row class="tableContent" *ngFor="let projectEm of projectEmployees" > 
               <!--NgFor to create a specific number of rows-->
                 <ion-col size="3">{{projectEm.employee.firstName}}  </ion-col>
                 <ion-col size="3">{{projectEm.employee.lastName}}  </ion-col>
                 <ion-col size="3"><ion-button type="button" color="danger" (click)="deleteProjectEmployee(projectEm)"> <ion-icon name="trash"></ion-icon> </ion-button> </ion-col>
                 
             </ion-row> 
         </ion-grid>
  

        </ion-list>
    </ion-card-content>
    </ion-card>

    
    



    <div class="actionBtn" style="display: flex; justify-content: center; margin-bottom: 15px; margin-top: 25px; ">
      <ion-button (click)="updateProject()" size ="default">Editar Proyecto</ion-button>
 </div>

  
</ion-content>